(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-540f7a4c"],{"0571":function(t,e,s){},"12f2":function(t,e,s){},1963:function(t,e,s){"use strict";var i=s("7a26"),a=s.n(i);a.a},"1e40":function(t,e,s){"use strict";var i=s("868c"),a=s.n(i);a.a},"1ef7":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-page"},[t.$store.state.isSearchPop?s("form",{staticClass:"page",attrs:{action:"/"}},[s("van-search",{attrs:{"show-action":"",placeholder:t.placeholder,shape:"round"},on:{search:t.onSearch,cancel:t.onCancel},scopedSlots:t._u([{key:"left",fn:function(){return[s("van-icon",{attrs:{size:"23px",name:"arrow-left"},on:{click:t.clickBack}})]},proxy:!0}],null,!1,2130828338),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1):t._e(),s("van-popup",{staticClass:"search-pop",style:{height:"100%",width:"100%"},attrs:{duration:"0",position:"top"},model:{value:t.$store.state.isSearchPop,callback:function(e){t.$set(t.$store.state,"isSearchPop",e)},expression:"$store.state.isSearchPop"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.isSearchPop,expression:"$store.state.isSearchPop"}],staticClass:"search"},[s("history-search",{directives:[{name:"show",rawName:"v-show",value:t.isSearch&&!t.isList,expression:"isSearch&&!isList"}],attrs:{history:t.history},on:{"history-clear":t.historyClear,"his-item-click":t.historyClick}}),s("hot-search",{directives:[{name:"show",rawName:"v-show",value:!t.isList||!t.value,expression:"!isList||!value"}],on:{"hot-click":t.hotClick}}),t.isList?s("detail-search",{key:t.value,attrs:{res:t.value}}):t._e()],1)])],1)},a=[],n=(s("c975"),s("a434"),s("ac1f"),s("5319"),s("55bc")),o=s("1bab");function l(t,e,s,i){return Object(o["a"])({url:"/search",params:{keywords:t,type:e,limit:s,offset:i}})}function r(){return Object(o["a"])({url:"/search/hot/detail"})}function c(){return Object(o["a"])({url:"/search/default"})}var h=s("c6a0"),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"hot-title"},[t._v("热搜榜")]),s("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,i){return s("van-cell",{key:e.searchWord},[s("div",{staticClass:"hot-item",on:{click:function(s){return t.hotClick(e.searchWord)}}},[s("div",{staticClass:"item-count",class:{"item-count-red":t.isHot(i)}},[s("span",[t._v(t._s(i+1))])]),s("div",{staticClass:"item-data"},[s("div",{staticClass:"word"},[s("span",[t._v(t._s(e.searchWord))])]),s("div",{staticClass:"content"},[s("span",[t._v(t._s(e.content))])])]),s("div",{staticClass:"item-score"},[t._v(" "+t._s(e.score)+" ")])])])})),1)],1)},d=[],m={name:"hotSearch",data:function(){return{list:[],loading:!1,finished:!1}},methods:{onLoad:function(){var t=this;r().then((function(e){t.list=e.data,t.loading=!1,t.list.length>=e.data.length&&(t.finished=!0)}))},isHot:function(t){return t<3},hotClick:function(t){this.$emit("hot-click",t)}}},v=m,f=(s("e70d"),s("2877")),g=Object(f["a"])(v,u,d,!1,null,"db0f41fe",null),p=g.exports,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-tabs",{staticClass:"tag-tabs",attrs:{swipeable:"",sticky:"","offset-top":"53px"},on:{change:t.changeTags},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.tags,(function(e,i){return s("van-tab",{key:i,attrs:{title:e.name}},[s("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s(e.comp,{tag:"div",attrs:{res:t.res}})],1)],1)})),1)],1)},b=[],_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"item-page"},[s("div",{staticClass:"click-item",on:{click:t.itemClick}},[s("div",{staticClass:"song-detail"},[s("div",{staticClass:"song-name"},[s("p",[t._v(t._s(t.songDetail.name)+" "),t.songDetail.alia[0]?s("span",{staticClass:"span-alia"},[t._v("("+t._s(t.songDetail.alia[0])+")")]):t._e()])]),s("div",{staticClass:"song-author"},[t._v(" "+t._s(t.songDetail.arName)+" ")])])]),s("div",{staticClass:"song-mv"},[t.songDetail.mvID?s("van-icon",{attrs:{name:"play-circle-o",size:"25",color:"#6f6f6f"},on:{click:function(e){return t.showMv(t.songDetail.mvID)}}}):t._e()],1),s("div",{staticClass:"song-set"},[s("van-icon",{staticClass:"set-icon",attrs:{name:"ellipsis",size:"20",color:"#6f6f6f"}})],1)])},C=[],D=(s("b0c0"),s("d399")),k={name:"itemAll",props:{song:{type:Object,default:function(){return{}}}},data:function(){return{songDetail:{name:this.song.name,songID:this.song.id,arName:this.song.artists[0].name,arID:this.song.artists[0].id,alia:this.song.alias,mvID:this.song.mvid}}},created:function(){var t=this;Object(h["i"])(this.songDetail.songID).then((function(e){t.songDetail.name=e.songs[0].name,t.songDetail.mvID=e.songs[0].mv}))},methods:{itemClick:function(){var t=this,e=this.$store.state;Object(h["l"])(this.songDetail.songID).then((function(s){console.log(s),null!=s.data[0].url?(e.isMusic=!0,e.musicSrc={id:t.songDetail.songID,src:s.data[0].url,img:t.songDetail.songImg,name:t.songDetail.name,arName:t.songDetail.arName,arID:t.songDetail.arID,isPlay:!0},e.arID=t.songDetail.arID,console.log(t.songDetail.arName),e.allMusic.pushNoRepeat(e.musicSrc),console.log(e.allMusic)):Object(D["a"])("暂无版权")}))},showMv:function(t){this.$router.push({name:"mv",params:{id:t}})}}},I=k,w=(s("7246"),Object(f["a"])(I,_,C,!1,null,"0cbfb7d7",null)),S=w.exports,x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[s("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.finished,expression:"finished"}],staticClass:"search-title"},[t._v("单曲")]),t._l(t.list[0],(function(e,i){return s("van-cell",{key:i},[s("lazy-component",[null!=e?s("item-search",{attrs:{song:e}}):t._e()],1)],1)})),s("div",{directives:[{name:"show",rawName:"v-show",value:t.finished,expression:"finished"}],staticClass:"search-title"},[t._v("歌单")]),t._l(t.list[1],(function(t,e){return s("van-cell",{key:e},[s("lazy-component",[s("item-play-list",{attrs:{"list-item":t}})],1)],1)})),s("div",{directives:[{name:"show",rawName:"v-show",value:t.finished,expression:"finished"}],staticClass:"search-title"},[t._v("专辑")]),t._l(t.list[2],(function(t,e){return s("van-cell",{key:e},[s("lazy-component",[s("item-album",{attrs:{"album-item":t}})],1)],1)})),s("div",{directives:[{name:"show",rawName:"v-show",value:t.finished,expression:"finished"}],staticClass:"search-title"},[t._v("视频")]),t._l(t.list[3],(function(t,e){return s("van-cell",{key:e},[s("lazy-component",[s("item-video",{attrs:{"video-item":t}})],1)],1)}))],2)],1)],1)},$=[],L=s("2e39"),O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"item-page",on:{click:t.toList}},[s("div",{staticClass:"img-page"},[s("van-image",{attrs:{src:t.listItem.coverImgUrl,width:"55",height:"55"}})],1),s("div",{staticClass:"content"},[s("div",{staticClass:"title"},[s("p",[t._v(t._s(t.listItem.name))])]),s("div",{staticClass:"ar"},[t._v(t._s(t.listItem.creator.nickname))])])])},j=[],N={name:"itemPlayList",props:{listItem:{type:Object,default:function(){return{}}}},methods:{toList:function(){this.$store.state.listID=this.listItem.id,this.$router.push("/songList")}}},M=N,P=(s("7e6f"),Object(f["a"])(M,O,j,!1,null,"103a4554",null)),z=P.exports,E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"item-page"},[s("div",{staticClass:"img-page"},[s("van-image",{attrs:{src:t.albumItem.picUrl,width:"50",height:"50"}})],1),s("div",{staticClass:"content"},[s("div",{staticClass:"title"},[s("p",[t._v(t._s(t.albumItem.name))])]),s("div",{staticClass:"ar"},[t._v(t._s(t.albumItem.artist.name))])])])},A=[],H={name:"itemAlbum",props:{albumItem:{type:Object,default:function(){return{}}}}},R=H,U=(s("1e40"),Object(f["a"])(R,E,A,!1,null,"a50301b8",null)),T=U.exports,W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"item-page"},[s("div",{staticClass:"img-page"},[s("van-image",{staticClass:"img",attrs:{src:t.videoItem.coverUrl,width:"88",height:"50"}})],1),s("div",{staticClass:"content"},[s("div",{staticClass:"title"},[s("p",[t._v(t._s(t.videoItem.title))])]),s("div",{staticClass:"ar"},[t._v(t._s(t.videoItem.creator.userName))])])])},B=[],J={name:"itemVideo",props:{videoItem:{type:Object,default:function(){return{}}}}},V=J,K=(s("964b"),Object(f["a"])(V,W,B,!1,null,"3c68cd72",null)),q=K.exports,F={name:"AllSearch",components:{ItemVideo:q,ItemAlbum:T,ItemPlayList:z,ItemSearch:L["a"]},data:function(){return{list:[],loading:!1,finished:!1,refreshing:!1,listPage:1}},props:{res:{type:String,default:function(){return""}}},methods:{onLoad:function(){var t=this;l(this.res,1018).then((function(e){t.refreshing&&(t.list=[],t.refreshing=!1),t.list=[],t.list=[e.result.song.songs,e.result.playList.playLists,e.result.album.albums,e.result.video.videos],t.loading=!1,t.list.length>=4&&(t.finished=!0),console.log(e)}))},onRefresh:function(){this.finished=!1,this.loading=!0,this.onLoad()}}},G=F,Q=(s("9d70"),Object(f["a"])(G,x,$,!1,null,"d79b1a50",null)),X=Q.exports,Y={name:"detailSearch",components:{AllSearch:X,ItemAll:S},data:function(){return{list:[[],[],[],[],[],[],[],[],[]],tags:[{type:1018,name:"综合",comp:"allSearch"},{type:1,name:"单曲"},{type:10,name:"专辑"},{type:1e3,name:"歌单"},{type:100,name:"歌手"},{type:1002,name:"用户"},{type:1009,name:"电台"},{type:1006,name:"歌词"},{type:1014,name:"视频"}],type:null,loading:!1,finished:!1,refreshing:!1,listPage:1,active:0,count:1}},props:{res:{type:String,default:function(){return""}}},watch:{res:function(){this.active=0,onload()}},methods:{onLoad:function(){this.loading=!1},changeTags:function(t,e){console.log(t,e)}}},Z=Y,tt=Object(f["a"])(Z,y,b,!1,null,"39d9dbc6",null),et=tt.exports,st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"history-page"},[s("div",{staticClass:"history-title"},[s("div",[t._v("历史记录")]),s("div",{on:{click:t.historyClear}},[s("van-icon",{attrs:{name:"delete",size:"20px"}})],1)]),s("div",t._l(t.his,(function(e){return s("span",{key:e,staticClass:"history-item",on:{click:function(s){return t.historyClick(e)}}},[t._v(" "+t._s(e)+" ")])})),0)])},it=[],at={name:"historySearch",data:function(){return{his:this.history.reverse()}},props:{history:{type:Array,default:function(){return[]}}},methods:{historyClick:function(t){this.$emit("his-item-click",t)},historyClear:function(){this.his=[],this.$emit("history-clear")}}},nt=at,ot=(s("5902"),Object(f["a"])(nt,st,it,!1,null,"4cd0c63e",null)),lt=ot.exports,rt={name:"search",components:{HistorySearch:lt,DetailSearch:et,HotSearch:p,SongList:n["a"]},data:function(){return{value:"",songs:null,val:"",isList:!1,placeholder:"请输入关键词",history:[],isSearch:!1}},created:function(){var t=this;c().then((function(e){t.placeholder=e.data.showKeyword}))},methods:{clickBack:function(){this.value?(this.value="",this.isList=!1):(this.$store.state.isSearchPop=!1,this.value="",this.isList=!1,this.$router.back())},onSearch:function(t){this.addHistory(t),this.isList=!0,this.isSearch=!0},addHistory:function(t){var e=t.replace(/^\s+|\s+$/g,"");if(-1===this.history.indexOf(e))this.history.push(e);else{for(var s=0;s<this.history.length;s++)if(this.history[s]===e){this.history.splice(s,1);break}this.history.push(e)}this.isList=!0},onCancel:function(){this.isList=!1},hotClick:function(t){this.value=t,this.onSearch(t)},historyClick:function(t){this.value=t,this.onSearch(t)},historyClear:function(){this.isSearch=!1,this.history=[]}}},ct=rt,ht=(s("b425"),Object(f["a"])(ct,i,a,!1,null,"e4a97d88",null));e["default"]=ht.exports},"2e39":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"item-page"},[s("div",{staticClass:"click-item",on:{click:t.itemClick}},[s("div",{staticClass:"img-page"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.songDetail.songImg,expression:"songDetail.songImg"}],attrs:{alt:"",width:"55",height:"55"}})]),s("div",{staticClass:"song-detail"},[s("div",{staticClass:"song-name"},[s("p",[t._v(t._s(t.songDetail.name)+" "),t.songDetail.alia[0]?s("span",{staticClass:"span-alia"},[t._v("("+t._s(t.songDetail.alia[0])+")")]):t._e()])]),s("div",{staticClass:"song-author"},[t._v(" "+t._s(t.songDetail.arName)+" ")])])]),s("div",{staticClass:"song-mv"},[t.songDetail.mvID?s("van-icon",{attrs:{name:"play-circle-o",size:"25",color:"#6f6f6f"},on:{click:function(e){return t.showMv(t.songDetail.mvID)}}}):t._e()],1),s("div",{staticClass:"song-set"},[s("van-icon",{staticClass:"set-icon",attrs:{name:"ellipsis",size:"20",color:"#6f6f6f"}})],1)])},a=[],n=(s("b0c0"),s("c6a0")),o=s("d399"),l={name:"itemSearch",props:{song:{type:Object,default:function(){return{}}}},data:function(){return{songDetail:{name:this.song.al.name,songID:this.song.id,arName:this.song.ar[0].name,arID:this.song.ar[0].id,alia:this.song.alia,songImg:this.song.al.picUrl,mvID:""}}},created:function(){var t=this;Object(n["i"])(this.songDetail.songID).then((function(e){t.songDetail.name=e.songs[0].name,t.songDetail.mvID=e.songs[0].mv}))},methods:{itemClick:function(){var t=this,e=this.$store.state;Object(n["l"])(this.songDetail.songID).then((function(s){console.log(s),null!=s.data[0].url?(e.isMusic=!0,e.musicSrc={count:e.allMusic.length,id:t.songDetail.songID,src:s.data[0].url,img:t.songDetail.songImg,name:t.songDetail.name,arName:t.songDetail.arName,arID:t.songDetail.arID,isPlay:!0},e.arID=t.songDetail.arID,console.log(t.songDetail.arName),e.allMusic.pushNoRepeat(e.musicSrc),console.log(e.allMusic)):Object(o["a"])("暂无版权")}))},showMv:function(t){this.$router.push({name:"mv",params:{id:t}})}}},r=l,c=(s("1963"),s("2877")),h=Object(c["a"])(r,i,a,!1,null,"568d44c5",null);e["a"]=h.exports},5902:function(t,e,s){"use strict";var i=s("f9e4"),a=s.n(i);a.a},"635b":function(t,e,s){},"65f0":function(t,e,s){var i=s("861d"),a=s("e8b5"),n=s("b622"),o=n("species");t.exports=function(t,e){var s;return a(t)&&(s=t.constructor,"function"!=typeof s||s!==Array&&!a(s.prototype)?i(s)&&(s=s[o],null===s&&(s=void 0)):s=void 0),new(void 0===s?Array:s)(0===e?0:e)}},7246:function(t,e,s){"use strict";var i=s("f828"),a=s.n(i);a.a},"7a26":function(t,e,s){},"7e6f":function(t,e,s){"use strict";var i=s("0571"),a=s.n(i);a.a},"868c":function(t,e,s){},"876b":function(t,e,s){},"964b":function(t,e,s){"use strict";var i=s("876b"),a=s.n(i);a.a},"9d70":function(t,e,s){"use strict";var i=s("bbe0"),a=s.n(i);a.a},a434:function(t,e,s){"use strict";var i=s("23e7"),a=s("23cb"),n=s("a691"),o=s("50c4"),l=s("7b0b"),r=s("65f0"),c=s("8418"),h=s("1dde"),u=s("ae40"),d=h("splice"),m=u("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,f=Math.min,g=9007199254740991,p="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!d||!m},{splice:function(t,e){var s,i,h,u,d,m,y=l(this),b=o(y.length),_=a(t,b),C=arguments.length;if(0===C?s=i=0:1===C?(s=0,i=b-_):(s=C-2,i=f(v(n(e),0),b-_)),b+s-i>g)throw TypeError(p);for(h=r(y,i),u=0;u<i;u++)d=_+u,d in y&&c(h,u,y[d]);if(h.length=i,s<i){for(u=_;u<b-i;u++)d=u+i,m=u+s,d in y?y[m]=y[d]:delete y[m];for(u=b;u>b-i+s;u--)delete y[u-1]}else if(s>i)for(u=b-i;u>_;u--)d=u+i-1,m=u+s-1,d in y?y[m]=y[d]:delete y[m];for(u=0;u<s;u++)y[u+_]=arguments[u+2];return y.length=b-i+s,h}})},b425:function(t,e,s){"use strict";var i=s("635b"),a=s.n(i);a.a},bbe0:function(t,e,s){},e70d:function(t,e,s){"use strict";var i=s("12f2"),a=s.n(i);a.a},f828:function(t,e,s){},f9e4:function(t,e,s){}}]);
//# sourceMappingURL=chunk-540f7a4c.c69be8f6.js.map