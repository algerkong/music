(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8fe794a2"],{"12f2":function(t,s,e){},"1ef7":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"search-page"},[t.$store.state.isSearchPop?e("form",{staticClass:"page",attrs:{action:"/"}},[e("van-search",{attrs:{"show-action":"",placeholder:t.placeholder,shape:"round"},on:{search:t.onSearch,cancel:t.onCancel},scopedSlots:t._u([{key:"left",fn:function(){return[e("van-icon",{staticClass:"icon",attrs:{name:"arrow-left"},on:{click:t.clickBack}})]},proxy:!0}],null,!1,261538755),model:{value:t.value,callback:function(s){t.value=s},expression:"value"}})],1):t._e(),e("van-popup",{staticClass:"search-pop",style:{height:"100%",width:"100%"},attrs:{duration:"0.1",position:"right"},model:{value:t.$store.state.isSearchPop,callback:function(s){t.$set(t.$store.state,"isSearchPop",s)},expression:"$store.state.isSearchPop"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.isSearchPop,expression:"$store.state.isSearchPop"}],staticClass:"search"},[e("history-search",{directives:[{name:"show",rawName:"v-show",value:t.isSearch&&!t.isList,expression:"isSearch&&!isList"}],attrs:{history:t.history},on:{"history-clear":t.historyClear,"his-item-click":t.historyClick}}),e("hot-search",{directives:[{name:"show",rawName:"v-show",value:!t.isList||!t.value,expression:"!isList||!value"}],on:{"hot-click":t.hotClick}}),t.isList?e("detail-search",{key:t.value,attrs:{res:t.value}}):t._e()],1)])],1)},a=[],n=(e("c975"),e("a434"),e("ac1f"),e("5319"),e("55bc")),o=e("1bab");function l(t,s,e,i){return Object(o["a"])({url:"/search",params:{keywords:t,type:s,limit:e,offset:i}})}function c(){return Object(o["a"])({url:"/search/hot/detail"})}function r(){return Object(o["a"])({url:"/search/default"})}var u=e("c6a0"),h=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"hot-title"},[t._v("热搜榜")]),e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},t._l(t.list,(function(s,i){return e("van-cell",{key:s.searchWord},[e("div",{staticClass:"hot-item",on:{click:function(e){return t.hotClick(s.searchWord)}}},[e("div",{staticClass:"item-count",class:{"item-count-red":t.isHot(i)}},[e("span",[t._v(t._s(i+1))])]),e("div",{staticClass:"item-data"},[e("div",{staticClass:"word"},[e("span",[t._v(t._s(s.searchWord))])]),e("div",{staticClass:"content"},[e("span",[t._v(t._s(s.content))])])]),e("div",{staticClass:"item-score"},[t._v(" "+t._s(s.score)+" ")])])])})),1)],1)},d=[],m={name:"hotSearch",data:function(){return{list:[],loading:!1,finished:!1}},methods:{onLoad:function(){var t=this;c().then((function(s){t.list=s.data,t.loading=!1,t.list.length>=s.data.length&&(t.finished=!0)}))},isHot:function(t){return t<3},hotClick:function(t){this.$emit("hot-click",t)}}},v=m,f=(e("e70d"),e("2877")),g=Object(f["a"])(v,h,d,!1,null,"db0f41fe",null),p=g.exports,y=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("van-tabs",{staticClass:"tag-tabs",attrs:{swipeable:"",sticky:"","offset-top":"53px"},on:{change:t.changeTags},model:{value:t.active,callback:function(s){t.active=s},expression:"active"}},t._l(t.tags,(function(s,i){return e("van-tab",{key:i,attrs:{title:s.name}},[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},[e(s.comp,{tag:"div",attrs:{res:t.res}})],1)],1)})),1)],1)},C=[],_=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"item-page"},[e("div",{staticClass:"click-item",on:{click:t.itemClick}},[e("div",{staticClass:"song-detail"},[e("div",{staticClass:"song-name"},[e("p",[t._v(t._s(t.songDetail.name)+" "),t.songDetail.alia[0]?e("span",{staticClass:"span-alia"},[t._v("("+t._s(t.songDetail.alia[0])+")")]):t._e()])]),e("div",{staticClass:"song-author"},[t._v(" "+t._s(t.songDetail.arName)+" ")])])]),e("div",{staticClass:"song-mv"},[t.songDetail.mvID?e("van-icon",{attrs:{name:"play-circle-o",size:"25",color:"#6f6f6f"},on:{click:function(s){return t.showMv(t.songDetail.mvID)}}}):t._e()],1),e("div",{staticClass:"song-set"},[e("van-icon",{staticClass:"set-icon",attrs:{name:"ellipsis",size:"20",color:"#6f6f6f"}})],1)])},b=[],D=(e("b0c0"),e("d399")),k={name:"itemAll",props:{song:{type:Object,default:function(){return{}}}},data:function(){return{songDetail:{name:this.song.name,songID:this.song.id,arName:this.song.artists[0].name,arID:this.song.artists[0].id,alia:this.song.alias,mvID:this.song.mvid}}},created:function(){var t=this;Object(u["i"])(this.songDetail.songID).then((function(s){t.songDetail.name=s.songs[0].name,t.songDetail.mvID=s.songs[0].mv}))},methods:{itemClick:function(){var t=this,s=this.$store.state;Object(u["l"])(this.songDetail.songID).then((function(e){console.log(e),null!=e.data[0].url?(s.isMusic=!0,s.musicSrc={id:t.songDetail.songID,src:e.data[0].url,img:t.songDetail.songImg,name:t.songDetail.name,arName:t.songDetail.arName,arID:t.songDetail.arID,isPlay:!0},s.arID=t.songDetail.arID,console.log(t.songDetail.arName),s.allMusic.pushNoRepeat(s.musicSrc),console.log(s.allMusic)):Object(D["a"])("暂无版权")}))},showMv:function(t){this.$router.push({name:"mv",params:{id:t}})}}},I=k,w=(e("7246"),Object(f["a"])(I,_,b,!1,null,"0cbfb7d7",null)),S=w.exports,x=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(s){t.refreshing=s},expression:"refreshing"}},[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.finished,expression:"finished"}],staticClass:"search-title"},[t._v("单曲")]),t._l(t.list[0],(function(s,i){return e("van-cell",{key:i},[e("lazy-component",[null!=s?e("item-search",{attrs:{song:s}}):t._e()],1)],1)})),e("div",{directives:[{name:"show",rawName:"v-show",value:t.finished,expression:"finished"}],staticClass:"search-title"},[t._v("歌单")]),t._l(t.list[1],(function(t,s){return e("van-cell",{key:s},[e("lazy-component",[e("item-play-list",{attrs:{"list-item":t}})],1)],1)})),e("div",{directives:[{name:"show",rawName:"v-show",value:t.finished,expression:"finished"}],staticClass:"search-title"},[t._v("专辑")]),t._l(t.list[2],(function(t,s){return e("van-cell",{key:s},[e("lazy-component",[e("item-album",{attrs:{"album-item":t}})],1)],1)})),e("div",{directives:[{name:"show",rawName:"v-show",value:t.finished,expression:"finished"}],staticClass:"search-title"},[t._v("视频")]),t._l(t.list[3],(function(t,s){return e("van-cell",{key:s},[e("lazy-component",[e("item-video",{attrs:{"video-item":t}})],1)],1)}))],2)],1)],1)},$=[],L=e("2e39"),O=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"item-page",on:{click:t.toList}},[e("div",{staticClass:"img-page"},[e("van-image",{staticClass:"img",attrs:{src:t.listItem.coverImgUrl+"?param=200y200"}})],1),e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[e("p",{staticClass:"van-ellipsis"},[t._v(t._s(t.listItem.name))])]),e("div",{staticClass:"ar van-ellipsis"},[t._v(t._s(t.listItem.creator.nickname))])])])},j=[],N={name:"itemPlayList",props:{listItem:{type:Object,default:function(){return{}}}},methods:{toList:function(){this.$store.state.listID=this.listItem.id,this.$router.push("/songList")}}},M=N,P=(e("6f95"),Object(f["a"])(M,O,j,!1,null,"0f000339",null)),E=P.exports,z=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"item-page"},[e("div",{staticClass:"img-page"},[e("van-image",{staticClass:"img",attrs:{src:t.albumItem.picUrl+"?param=200y200"}})],1),e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[e("p",{staticClass:"van-ellipsis"},[t._v(t._s(t.albumItem.name))])]),e("div",{staticClass:"ar van-ellipsis"},[t._v(" "+t._s(t.albumItem.artist.name)+" ")])])])},A=[],H={name:"itemAlbum",props:{albumItem:{type:Object,default:function(){return{}}}}},R=H,U=(e("c680"),Object(f["a"])(R,z,A,!1,null,"03d6fa8a",null)),T=U.exports,W=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"item-page"},[e("div",{staticClass:"img-page"},[e("van-image",{staticClass:"img",attrs:{src:t.videoItem.coverUrl+"?param=192y108"}})],1),e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[e("p",{staticClass:"van-ellipsis"},[t._v(t._s(t.videoItem.title))])]),e("div",{staticClass:"ar van-ellipsis"},[t._v(t._s(t.videoItem.creator.userName))])])])},B=[],J={name:"itemVideo",props:{videoItem:{type:Object,default:function(){return{}}}}},V=J,K=(e("8cfd"),Object(f["a"])(V,W,B,!1,null,"3f133c0e",null)),q=K.exports,F={name:"AllSearch",components:{ItemVideo:q,ItemAlbum:T,ItemPlayList:E,ItemSearch:L["a"]},data:function(){return{list:[],loading:!1,finished:!1,refreshing:!1,listPage:1}},props:{res:{type:String,default:function(){return""}}},methods:{onLoad:function(){var t=this;l(this.res,1018).then((function(s){t.refreshing&&(t.list=[],t.refreshing=!1),t.list=[],t.list=[s.result.song.songs,s.result.playList.playLists,s.result.album.albums,s.result.video.videos],t.loading=!1,t.list.length>=4&&(t.finished=!0),console.log(s)}))},onRefresh:function(){this.finished=!1,this.loading=!0,this.onLoad()}}},G=F,Q=(e("9d70"),Object(f["a"])(G,x,$,!1,null,"d79b1a50",null)),X=Q.exports,Y={name:"detailSearch",components:{AllSearch:X,ItemAll:S},data:function(){return{list:[[],[],[],[],[],[],[],[],[]],tags:[{type:1018,name:"综合",comp:"allSearch"},{type:1,name:"单曲"},{type:10,name:"专辑"},{type:1e3,name:"歌单"},{type:100,name:"歌手"},{type:1002,name:"用户"},{type:1009,name:"电台"},{type:1006,name:"歌词"},{type:1014,name:"视频"}],type:null,loading:!1,finished:!1,refreshing:!1,listPage:1,active:0,count:1}},props:{res:{type:String,default:function(){return""}}},watch:{res:function(){this.active=0,onload()}},methods:{onLoad:function(){this.loading=!1},changeTags:function(t,s){console.log(t,s)}}},Z=Y,tt=Object(f["a"])(Z,y,C,!1,null,"6cc2f718",null),st=tt.exports,et=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"history-page"},[e("div",{staticClass:"history-title"},[e("div",[t._v("历史记录")]),e("div",{on:{click:t.historyClear}},[e("van-icon",{attrs:{name:"delete",size:"20px"}})],1)]),e("div",t._l(t.his,(function(s){return e("span",{key:s,staticClass:"history-item",on:{click:function(e){return t.historyClick(s)}}},[t._v(" "+t._s(s)+" ")])})),0)])},it=[],at={name:"historySearch",data:function(){return{his:this.history.reverse()}},props:{history:{type:Array,default:function(){return[]}}},methods:{historyClick:function(t){this.$emit("his-item-click",t)},historyClear:function(){this.his=[],this.$emit("history-clear")}}},nt=at,ot=(e("5902"),Object(f["a"])(nt,et,it,!1,null,"4cd0c63e",null)),lt=ot.exports,ct={name:"search",components:{HistorySearch:lt,DetailSearch:st,HotSearch:p,SongList:n["a"]},data:function(){return{value:"",songs:null,val:"",isList:!1,placeholder:"请输入关键词",history:[],isSearch:!1}},created:function(){var t=this;r().then((function(s){t.placeholder=s.data.showKeyword}))},methods:{clickBack:function(){this.value?(this.value="",this.isList=!1):(this.$store.state.isSearchPop=!1,this.value="",this.isList=!1,this.$router.back())},onSearch:function(t){this.addHistory(t),this.isList=!0,this.isSearch=!0},addHistory:function(t){var s=t.replace(/^\s+|\s+$/g,"");if(-1===this.history.indexOf(s))this.history.push(s);else{for(var e=0;e<this.history.length;e++)if(this.history[e]===s){this.history.splice(e,1);break}this.history.push(s)}this.isList=!0},onCancel:function(){this.isList=!1},hotClick:function(t){this.value=t,this.onSearch(t)},historyClick:function(t){this.value=t,this.onSearch(t)},historyClear:function(){this.isSearch=!1,this.history=[]}}},rt=ct,ut=(e("5a14"),Object(f["a"])(rt,i,a,!1,null,"2443f18a",null));s["default"]=ut.exports},2217:function(t,s,e){},"2e39":function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"item-page"},[e("div",{staticClass:"click-item",on:{click:t.itemClick}},[e("div",{staticClass:"img-page"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.songDetail.songImg+"?param=200y200",expression:"songDetail.songImg +'?param=200y200'"}],staticClass:"img",attrs:{alt:""}})]),e("div",{staticClass:"song-detail"},[e("div",{staticClass:"song-name"},[e("p",{staticClass:"van-ellipsis"},[t._v(t._s(t.songDetail.name)+" "),t.songDetail.alia[0]?e("span",{staticClass:"span-alia"},[t._v("("+t._s(t.songDetail.alia[0])+")")]):t._e()])]),e("div",{staticClass:"song-author van-ellipsis"},[t._v(" "+t._s(t.songDetail.arName)+" ")])])]),e("div",{staticClass:"song-mv"},[t.songDetail.mvID?e("van-icon",{attrs:{name:"play-circle-o",size:"25",color:"#6f6f6f"},on:{click:function(s){return t.showMv(t.songDetail.mvID)}}}):t._e()],1),e("div",{staticClass:"song-set"},[e("van-icon",{staticClass:"set-icon",attrs:{name:"ellipsis",size:"20",color:"#6f6f6f"}})],1)])},a=[],n=(e("b0c0"),e("c6a0")),o=e("d399"),l={name:"itemSearch",props:{song:{type:Object,default:function(){return{}}}},data:function(){return{songDetail:{name:this.song.al.name,songID:this.song.id,arName:this.song.ar[0].name,arID:this.song.ar[0].id,alia:this.song.alia,songImg:this.song.al.picUrl,mvID:""}}},created:function(){var t=this;Object(n["i"])(this.songDetail.songID).then((function(s){t.songDetail.name=s.songs[0].name,t.songDetail.mvID=s.songs[0].mv}))},methods:{itemClick:function(){var t=this,s=this.$store.state;Object(n["l"])(this.songDetail.songID).then((function(e){console.log(e),null!=e.data[0].url?(s.isMusic=!0,s.musicSrc={count:s.allMusic.length,id:t.songDetail.songID,src:e.data[0].url,img:t.songDetail.songImg,name:t.songDetail.name,arName:t.songDetail.arName,arID:t.songDetail.arID,isPlay:!0},s.arID=t.songDetail.arID,console.log(t.songDetail.arName),s.allMusic.pushNoRepeat(s.musicSrc),console.log(s.allMusic)):Object(o["a"])("暂无版权")}))},showMv:function(t){this.$router.push({name:"mv",params:{id:t}})}}},c=l,r=(e("b324"),e("2877")),u=Object(r["a"])(c,i,a,!1,null,"5657150c",null);s["a"]=u.exports},5902:function(t,s,e){"use strict";var i=e("f9e4"),a=e.n(i);a.a},"5a14":function(t,s,e){"use strict";var i=e("2217"),a=e.n(i);a.a},"65f0":function(t,s,e){var i=e("861d"),a=e("e8b5"),n=e("b622"),o=n("species");t.exports=function(t,s){var e;return a(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!a(e.prototype)?i(e)&&(e=e[o],null===e&&(e=void 0)):e=void 0),new(void 0===e?Array:e)(0===s?0:s)}},"6f95":function(t,s,e){"use strict";var i=e("71e4"),a=e.n(i);a.a},"71e4":function(t,s,e){},7246:function(t,s,e){"use strict";var i=e("f828"),a=e.n(i);a.a},"8cfd":function(t,s,e){"use strict";var i=e("f18e"),a=e.n(i);a.a},"9d70":function(t,s,e){"use strict";var i=e("bbe0"),a=e.n(i);a.a},a434:function(t,s,e){"use strict";var i=e("23e7"),a=e("23cb"),n=e("a691"),o=e("50c4"),l=e("7b0b"),c=e("65f0"),r=e("8418"),u=e("1dde"),h=e("ae40"),d=u("splice"),m=h("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,f=Math.min,g=9007199254740991,p="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!d||!m},{splice:function(t,s){var e,i,u,h,d,m,y=l(this),C=o(y.length),_=a(t,C),b=arguments.length;if(0===b?e=i=0:1===b?(e=0,i=C-_):(e=b-2,i=f(v(n(s),0),C-_)),C+e-i>g)throw TypeError(p);for(u=c(y,i),h=0;h<i;h++)d=_+h,d in y&&r(u,h,y[d]);if(u.length=i,e<i){for(h=_;h<C-i;h++)d=h+i,m=h+e,d in y?y[m]=y[d]:delete y[m];for(h=C;h>C-i+e;h--)delete y[h-1]}else if(e>i)for(h=C-i;h>_;h--)d=h+i-1,m=h+e-1,d in y?y[m]=y[d]:delete y[m];for(h=0;h<e;h++)y[h+_]=arguments[h+2];return y.length=C-i+e,u}})},a838:function(t,s,e){},b324:function(t,s,e){"use strict";var i=e("e7a9"),a=e.n(i);a.a},bbe0:function(t,s,e){},c680:function(t,s,e){"use strict";var i=e("a838"),a=e.n(i);a.a},e70d:function(t,s,e){"use strict";var i=e("12f2"),a=e.n(i);a.a},e7a9:function(t,s,e){},f18e:function(t,s,e){},f828:function(t,s,e){},f9e4:function(t,s,e){}}]);
//# sourceMappingURL=chunk-8fe794a2.2a06d21f.js.map