(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ca63f74"],{"1fa5":function(t,o,a){},"4e3d":function(t,o,a){"use strict";var n=a("1fa5"),e=a.n(n);e.a},dbd0:function(t,o,a){"use strict";a.r(o);var n=function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("div",[a("van-popup",{staticClass:"mv-page",style:{height:"100%"},attrs:{duration:"0.2",position:"bottom"},model:{value:t.show,callback:function(o){t.show=o},expression:"show"}},[a("top-bar",{attrs:{title:t.mvName}}),a("div",{staticClass:"video-page"},[a("video",{staticClass:"mv-video",attrs:{controls:"",autoplay:"",src:t.mvSrc,poster:t.mvBackground}})]),a("div",{staticClass:"content"}),a("van-form",[a("van-collapse",{model:{value:t.activeNames,callback:function(o){t.activeNames=o},expression:"activeNames"}},[a("van-collapse-item",{attrs:{name:"1"},scopedSlots:t._u([{key:"title",fn:function(){return[a("div",{staticClass:"mv-title"},[a("p",[a("span",{staticClass:"name"},[t._v(t._s(t.mvName))]),a("span",{on:{click:t.showSinger}},[t._v(" - "+t._s(t.author))])])]),a("div",{staticClass:"mv-count"},[a("span",[t._v(t._s(t.playCount)+"次观看")])])]},proxy:!0}])},[a("div",{staticClass:"mv-describe"},[a("p",[t._v(t._s(t.mvTime)+" 发布")]),a("p",[t._v(t._s(t.text))]),a("p",[t._v(t._s(t.desc))])])])],1),a("van-grid",[a("van-grid-item",{attrs:{icon:"good-job-o",text:t.allCommentCount.toString()}}),a("van-grid-item",{attrs:{icon:"star-o",text:t.count.subCount.toString()}}),a("van-grid-item",{attrs:{icon:"chat-o",text:t.count.commentCount.toString()}}),a("van-grid-item",{attrs:{icon:"share",text:t.count.shareCount.toString()}})],1),a("div",[a("van-sticky",{attrs:{"offset-top":"245px"}},[a("div",{staticClass:"title"},[a("p",[t._v("评论区")])])]),a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(o){t.loading=o},expression:"loading"}},t._l(t.comments,(function(o,n){return a("van-cell",{key:n*(t.page+1)},[a("comment-item",{attrs:{comment:o}})],1)})),1)],1)],1)],1)],1)},e=[],s=(a("b0c0"),a("c6a0")),i=a("d954"),c=a("74e9"),m={name:"mv",components:{CommentItem:c["a"],TopBar:i["a"]},data:function(){return{show:!0,mvID:"",activeNames:["0"],loading:!1,finished:!1,page:1,comments:[],allCommentCount:"",mvSrc:"",mvBackground:"",mvName:"",author:"",text:"",playCount:"",arID:"",mvTime:"",desc:"",count:{subCount:"",commentCount:"",shareCount:""}}},watch:{$route:function(t,o){this.comments=[],this.oneLoad(),this.onLoad()}},created:function(){this.oneLoad(),this.onLoad()},methods:{oneLoad:function(){var t=this;this.mvID=this.$route.params.id;var o=this.$store.state;o.musicSrc.isPlay=!1,Object(s["d"])(this.mvID).then((function(o){console.log(t.mvID),console.log(o),t.mvSrc=o.data.url})),this.comments=[],Object(s["f"])(this.mvID).then((function(o){console.log(o),t.mvBackground=o.data.cover,t.mvName=o.data.name,t.author=o.data.artistName,t.playCount=o.data.playCount,t.text=o.data.briefDesc,t.arID=o.data.artistId,t.mvTime=o.data.publishTime,t.desc=o.data.desc,t.count={subCount:o.data.subCount,commentCount:o.data.commentCount,shareCount:o.data.shareCount}})),setTimeout((function(){console.log(o.isMv)}),2e3)},showSinger:function(){this.$store.state.arID=this.arID,this.$store.state.isSinger=!0,this.$router.push("/singer")},onLoad:function(){var t=this;Object(s["e"])(this.mvID,30,30*this.page).then((function(o){console.log(o),t.comments.push.apply(t.comments,o.comments),console.log(t.comments),t.allCommentCount=o.total,t.loading=!1,t.page++,t.comments.length>30*t.allCommentCount&&(t.finished=!0)}))}}},r=m,u=(a("4e3d"),a("2877")),l=Object(u["a"])(r,n,e,!1,null,"25f9ed12",null);o["default"]=l.exports}}]);
//# sourceMappingURL=chunk-1ca63f74.7b89a845.js.map