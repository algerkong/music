(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04d3d84e"],{"03b4":function(t,s,e){"use strict";var i=e("5648"),a=e.n(i);a.a},"12f2":function(t,s,e){},"1ef7":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"search-page"},[t.$store.state.isSearchPop?e("form",{staticClass:"page",attrs:{action:"/"}},[e("van-search",{attrs:{"show-action":"",placeholder:t.placeholder,shape:"round"},on:{search:t.onSearch,cancel:t.onCancel},scopedSlots:t._u([{key:"left",fn:function(){return[e("van-icon",{attrs:{size:"23px",name:"arrow-left"},on:{click:t.clickBack}})]},proxy:!0}],null,!1,2130828338),model:{value:t.value,callback:function(s){t.value=s},expression:"value"}})],1):t._e(),e("van-popup",{staticClass:"search-pop",style:{height:"100%",width:"100%"},attrs:{duration:"0",position:"top"},model:{value:t.$store.state.isSearchPop,callback:function(s){t.$set(t.$store.state,"isSearchPop",s)},expression:"$store.state.isSearchPop"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.isSearchPop,expression:"$store.state.isSearchPop"}],staticClass:"search"},[e("history-search",{directives:[{name:"show",rawName:"v-show",value:t.isSearch&&!t.isList,expression:"isSearch&&!isList"}],attrs:{history:t.history},on:{"history-clear":t.historyClear,"his-item-click":t.historyClick}}),e("hot-search",{directives:[{name:"show",rawName:"v-show",value:!t.isList||!t.value,expression:"!isList||!value"}],on:{"hot-click":t.hotClick}}),t.isList?e("detail-search",{key:t.value,attrs:{res:t.value}}):t._e()],1)])],1)},a=[],n=(e("c975"),e("a434"),e("ac1f"),e("5319"),e("55bc")),o=e("1bab");function r(t,s){return Object(o["a"])({url:"/search",params:{keywords:t,type:s}})}function c(){return Object(o["a"])({url:"/search/hot/detail"})}function l(){return Object(o["a"])({url:"/search/default"})}var h=e("c6a0"),u=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"hot-title"},[t._v("热搜榜")]),e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},t._l(t.list,(function(s,i){return e("van-cell",{key:s.searchWord},[e("div",{staticClass:"hot-item",on:{click:function(e){return t.hotClick(s.searchWord)}}},[e("div",{staticClass:"item-count",class:{"item-count-red":t.isHot(i)}},[e("span",[t._v(t._s(i+1))])]),e("div",{staticClass:"item-data"},[e("div",{staticClass:"word"},[e("span",[t._v(t._s(s.searchWord))])]),e("div",{staticClass:"content"},[e("span",[t._v(t._s(s.content))])])]),e("div",{staticClass:"item-score"},[t._v(" "+t._s(s.score)+" ")])])])})),1)],1)},d=[],f={name:"hotSearch",data:function(){return{list:[],loading:!1,finished:!1}},methods:{onLoad:function(){var t=this;c().then((function(s){t.list=s.data,t.loading=!1,t.list.length>=s.data.length&&(t.finished=!0)}))},isHot:function(t){return t<3},hotClick:function(t){this.$emit("hot-click",t)}}},v=f,g=(e("e70d"),e("2877")),m=Object(g["a"])(v,u,d,!1,null,"db0f41fe",null),p=m.exports,y=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(s){t.refreshing=s},expression:"refreshing"}},[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},t._l(t.list,(function(s,i){return e("van-cell",{key:i},[null!=s?e("item-search",{attrs:{song:s}}):t._e()],1)})),1)],1)],1)},C=[],k=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"item-page"},[e("div",{staticClass:"click-item",on:{click:t.itemClick}},[e("div",{staticClass:"img-page"},[e("van-image",{attrs:{width:"55",height:"55",src:t.songDetail.songImg}})],1),e("div",{staticClass:"song-detail"},[e("div",{staticClass:"song-name"},[e("p",[t._v(t._s(t.songDetail.name)+" "),t.songDetail.alia[0]?e("span",{staticClass:"span-alia"},[t._v("("+t._s(t.songDetail.alia[0])+")")]):t._e()])]),e("div",{staticClass:"song-author"},[t._v(" "+t._s(t.songDetail.arName)+" ")])])]),e("div",{staticClass:"song-mv"},[t.songDetail.mvID?e("van-icon",{attrs:{name:"play-circle-o",size:"25",color:"#6f6f6f"},on:{click:t.showMv}}):t._e()],1),e("div",{staticClass:"song-set"},[e("van-icon",{staticClass:"set-icon",attrs:{name:"ellipsis",size:"20",color:"#6f6f6f"}})],1)])},_=[],b=(e("b0c0"),e("d399")),D={name:"itemSearch",props:{song:{type:Object,default:function(){return{}}}},data:function(){return{songDetail:{name:this.song.al.name,songID:this.song.id,arName:this.song.ar[0].name,arID:this.song.ar[0].id,alia:this.song.alia,songImg:this.song.al.picUrl,mvID:""}}},created:function(){var t=this;Object(h["e"])(this.songDetail.songID).then((function(s){t.songDetail.name=s.songs[0].name,t.songDetail.mvID=s.songs[0].mv}))},methods:{itemClick:function(){var t=this,s=this.$store.state;Object(h["g"])(this.songDetail.songID).then((function(e){console.log(e),null!=e.data[0].url?(s.isMusic=!0,s.musicSrc={id:t.songDetail.songID,src:e.data[0].url,img:t.songDetail.songImg,name:t.songDetail.name,arName:t.songDetail.arName,arID:t.songDetail.arID,isPlay:!0},s.arID=t.songDetail.arID,console.log(t.songDetail.arName),s.allMusic.pushNoRepeat(s.musicSrc),console.log(s.allMusic)):Object(b["a"])("暂无版权")}))},showMv:function(){console.log("11111111"),this.$store.state.mvID=this.songDetail.mvID,this.$router.push("/mv")}}},S=D,w=(e("58de"),Object(g["a"])(S,k,_,!1,null,"400953ea",null)),x=w.exports,$={name:"detailSearch",components:{ItemSearch:x},data:function(){return{list:[],loading:!1,finished:!1,refreshing:!1,listPage:1}},props:{res:{type:String,default:function(){return""}}},methods:{onLoad:function(){var t=this;r(this.res,1018).then((function(s){t.refreshing&&(t.list=[],t.refreshing=!1),t.list=[],t.list=s.result.song.songs,t.loading=!1,t.list.length>=5&&(t.finished=!0),console.log(s)}))},onRefresh:function(){this.finished=!1,this.loading=!0,this.onLoad()}}},I=$,L=Object(g["a"])(I,y,C,!1,null,"7cb43f8d",null),O=L.exports,j=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"history-page"},[e("div",{staticClass:"history-title"},[e("div",[t._v("历史记录")]),e("div",{on:{click:t.historyClear}},[e("van-icon",{attrs:{name:"delete",size:"20px"}})],1)]),e("div",t._l(t.his,(function(s){return e("span",{key:s,staticClass:"history-item",on:{click:function(e){return t.historyClick(s)}}},[t._v(" "+t._s(s)+" ")])})),0)])},N=[],P={name:"historySearch",data:function(){return{his:this.history.reverse()}},props:{history:{type:Array,default:function(){return[]}}},methods:{historyClick:function(t){this.$emit("his-item-click",t)},historyClear:function(){this.his=[],this.$emit("history-clear")}}},M=P,E=(e("5902"),Object(g["a"])(M,j,N,!1,null,"4cd0c63e",null)),H=E.exports,A={name:"search",components:{HistorySearch:H,ItemSearch:x,DetailSearch:O,HotSearch:p,SongList:n["a"]},data:function(){return{value:"",songs:null,val:"",isList:!1,placeholder:"请输入关键词",history:[],isSearch:!1}},created:function(){var t=this;l().then((function(s){t.placeholder=s.data.showKeyword}))},methods:{clickBack:function(){this.value?(this.value="",this.isList=!1):(this.$store.state.isSearchPop=!1,this.value="",this.isList=!1,this.$router.back())},onSearch:function(t){this.addHistory(t),this.isList=!0,this.isSearch=!0},addHistory:function(t){var s=t.replace(/^\s+|\s+$/g,"");if(-1===this.history.indexOf(s))this.history.push(s);else{for(var e=0;e<this.history.length;e++)if(this.history[e]===s){this.history.splice(e,1);break}this.history.push(s)}this.isList=!0},onCancel:function(){this.isList=!1},onList:function(t){var s=this;r(t,1018).then((function(t){console.log(t),s.songs=t.result.song.songs,s.songs&&(s.isList=!0)}))},hotClick:function(t){this.value=t,this.onSearch(t)},historyClick:function(t){this.value=t,this.onSearch(t)},historyClear:function(){this.isSearch=!1,this.history=[]}}},z=A,R=(e("03b4"),Object(g["a"])(z,i,a,!1,null,"26c84b2c",null));s["default"]=R.exports},5648:function(t,s,e){},"58de":function(t,s,e){"use strict";var i=e("5d62"),a=e.n(i);a.a},5902:function(t,s,e){"use strict";var i=e("f9e4"),a=e.n(i);a.a},"5d62":function(t,s,e){},"65f0":function(t,s,e){var i=e("861d"),a=e("e8b5"),n=e("b622"),o=n("species");t.exports=function(t,s){var e;return a(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!a(e.prototype)?i(e)&&(e=e[o],null===e&&(e=void 0)):e=void 0),new(void 0===e?Array:e)(0===s?0:s)}},a434:function(t,s,e){"use strict";var i=e("23e7"),a=e("23cb"),n=e("a691"),o=e("50c4"),r=e("7b0b"),c=e("65f0"),l=e("8418"),h=e("1dde"),u=e("ae40"),d=h("splice"),f=u("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,g=Math.min,m=9007199254740991,p="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!d||!f},{splice:function(t,s){var e,i,h,u,d,f,y=r(this),C=o(y.length),k=a(t,C),_=arguments.length;if(0===_?e=i=0:1===_?(e=0,i=C-k):(e=_-2,i=g(v(n(s),0),C-k)),C+e-i>m)throw TypeError(p);for(h=c(y,i),u=0;u<i;u++)d=k+u,d in y&&l(h,u,y[d]);if(h.length=i,e<i){for(u=k;u<C-i;u++)d=u+i,f=u+e,d in y?y[f]=y[d]:delete y[f];for(u=C;u>C-i+e;u--)delete y[u-1]}else if(e>i)for(u=C-i;u>k;u--)d=u+i-1,f=u+e-1,d in y?y[f]=y[d]:delete y[f];for(u=0;u<e;u++)y[u+k]=arguments[u+2];return y.length=C-i+e,h}})},e70d:function(t,s,e){"use strict";var i=e("12f2"),a=e.n(i);a.a},f9e4:function(t,s,e){}}]);
//# sourceMappingURL=chunk-04d3d84e.6ac9bcba.js.map